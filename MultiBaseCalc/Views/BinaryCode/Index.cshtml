@{
    ViewData["Title"] = "Binary Code Calculator";
}

<div class="container">
    <h2>Binary Code Calculator</h2>
    <div class="form-group">
        <label for="number">Enter Number:</label>
        <input type="number" id="number" class="form-control" />
        <label for="bits">Number of bits:</label>
        <input type="number" id="bits" class="form-control" value="8" />
        <button onclick="calculate()" class="btn btn-primary">Calculate</button>
    </div>
    <div id="result">
        <h3>Results:</h3>
        <p>Direct Code (Прямий код): <span id="directCode"></span></p>
        <p>Inverse Code (Зворотний код): <span id="inverseCode"></span></p>
        <p>Complement Code (Додатковий код): <span id="complementCode"></span></p>
    </div>
</div>
<script>
    async function calculate() {
        const number = document.getElementById('number').value;
        const bits = document.getElementById('bits').value;

        if (!number) {
            alert('Please enter a number');
            return;
        }

        try {
            const response = await fetch('/BinaryCode/Calculate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({ number: parseInt(number), bits: parseInt(bits || 8) })
            });

            if (!response.ok) throw new Error('Network response was not ok');

            const data = await response.json();

            if (data.error) {
                alert(data.error);
                return;
            }

            document.getElementById('directCode').textContent = data.DirectCode;
            document.getElementById('inverseCode').textContent = data.InverseCode;
            document.getElementById('complementCode').textContent = data.ComplementCode;

            console.log("Number:", number);
            console.log("Direct Code (Прямий код):", data.DirectCode);
            console.log("Inverse Code (Зворотний код):", data.InverseCode);
            console.log("Complement Code (Додатковий код):", data.ComplementCode);
        } catch (error) {
            console.error('Error:', error);
            alert('An error occurred while calculating');
        }
    }

</script>

